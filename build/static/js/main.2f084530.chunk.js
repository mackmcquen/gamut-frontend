(this["webpackJsonpartwork-app"]=this["webpackJsonpartwork-app"]||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),l=(a(96),a(11)),s=a(10),i=a(13),u=a(12),m=(a(97),a(29)),h=a(15),p=a(34),f=a(137),d=a(131),g=a(139),E=a(128),v=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(p.a)({},t.target.id,t.target.value))},e.signupUser=function(t){t.preventDefault(),console.log("-----------------");var a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:{email:e.state.email,username:e.state.username,password:e.state.password}})};fetch("http://localhost:3001/users",a).then((function(e){return e.json()})).then((function(t){e.state.email&&e.state.username&&""!==e.state.password?(console.log(t),e.props.history.push("/search")):alert("Please fill all fields")}))},e.state={email:"",username:"",password:""},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Signup-form"},r.a.createElement("img",{src:"../gamut.png",alt:"Gamut",className:"Gamut-logo"}),r.a.createElement(g.a,{m:3},r.a.createElement(E.a,{className:"Signup-title",variant:"h4"},"Welcome aboard.")),r.a.createElement("form",{onSubmit:this.signupUser},r.a.createElement(g.a,{m:-1},r.a.createElement(f.a,{className:"Signup-input",id:"email",onChange:this.handleChange,type:"email",value:this.state.email,variant:"filled",label:"Email",autoComplete:"off"})),r.a.createElement("br",null),r.a.createElement(g.a,{m:1},r.a.createElement(f.a,{className:"Signup-input",id:"username",onChange:this.handleChange,type:"text",value:this.state.username,variant:"filled",label:"Username",autoComplete:"off"})),r.a.createElement("br",null),r.a.createElement(g.a,{m:-1},r.a.createElement(f.a,{className:"Signup-input",id:"password",onChange:this.handleChange,type:"password",value:this.state.password,variant:"filled",label:"Password",autoComplete:"off"})),r.a.createElement("br",null),r.a.createElement(g.a,{m:1},r.a.createElement(d.a,{className:"Signup-button",type:"submit",variant:"contained",color:"primary"},"Sign Up"))),r.a.createElement(g.a,{m:2},r.a.createElement(m.b,{to:"/login",className:"Login-link",type:"button"},"Have an account? Login")))}}]),a}(r.a.Component),b=function(e){return{type:"CURRENT_USER",user:e}},y=a(19),w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(p.a)({},t.target.id,t.target.value))},e.loginUser=function(t){t.preventDefault();var a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e.state)};fetch("http://localhost:3001/auth",a).then((function(e){return e.json()})).then((function(t){t.error?alert(t.error):(console.log(t),localStorage.setItem("token",t.token),e.props.loginSuccess(t),e.props.history.push("/search"))}))},e.state={email:"",username:"",password:""},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Signup-form"},r.a.createElement("img",{src:"../gamut.png",alt:"Gamut",className:"Gamut-logo"}),r.a.createElement(g.a,{m:3},r.a.createElement(E.a,{className:"Signup-title",variant:"h4"},"Welcome back.")),r.a.createElement("form",{onSubmit:this.loginUser},r.a.createElement(g.a,{m:-1},r.a.createElement(f.a,{className:"Signup-input",id:"username",onChange:this.handleChange,type:"text",value:this.state.username,variant:"filled",label:"Username",autoComplete:"off"})),r.a.createElement("br",null),r.a.createElement(g.a,{m:1},r.a.createElement(f.a,{className:"Signup-input",id:"password",onChange:this.handleChange,type:"password",value:this.state.password,variant:"filled",label:"Password",autoComplete:"off"})),r.a.createElement("br",null),r.a.createElement(g.a,{m:-1},r.a.createElement(d.a,{className:"Signup-button",type:"submit",variant:"contained",color:"primary"},"Login"))),r.a.createElement(g.a,{m:3},r.a.createElement(m.b,{to:"/signup",className:"Login-link",type:"button"},"New to Gamut? Sign-Up")))}}]),a}(r.a.Component),k={loginSuccess:function(e){return{type:"LOGIN_SUCCESS",user:e}}},j=Object(y.b)(null,k)(w),O=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSave=function(){var t={title:e.props.art.title,image:e.props.art.image,artist:e.props.art.artistName,date:e.props.art.completitionYear},a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)};fetch("http://localhost:3001/artworks",a).then((function(e){return e.json()})).then((function(t){console.log(t),console.log(e.props.user);var a={collection_id:e.props.user.id,artwork_id:t.id},n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)};fetch("http://localhost:3001/artwork_collections",n).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){console.log(this.props);return r.a.createElement("div",null,r.a.createElement(E.a,{className:"Artwork-info",variant:"h4"},this.props.art.title),r.a.createElement("a",{href:"".concat(this.props.art.image),target:"_blank"},r.a.createElement("img",{src:"".concat(this.props.art.image),alt:"Artwork",style:{height:"75%",width:"75%"}})),r.a.createElement("div",{className:"Artwork-info"},r.a.createElement(E.a,{className:"Artwork-info",variant:"h5"},this.props.art.artistName),r.a.createElement(E.a,{className:"Artwork-info",variant:"h6"},this.props.art.completitionYear),r.a.createElement(d.a,{variant:"contained",color:"primary",onClick:this.handleSave,type:"submit"},"Add to Collection")))}}]),a}(n.Component),S=a(132),N=a(106),C=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderArtworks=function(){return e.props.artworks.map((function(t){return r.a.createElement(S.a,{item:!0,xs:4},r.a.createElement(N.a,{className:"Artwork-card",elevation:3},r.a.createElement(O,{art:t,key:t.id,user:e.props.auth})))}))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(S.a,{spacing:3,container:!0,direction:"row",justify:"space-evenly",alignItems:"flex-start"},this.renderArtworks())))}}]),a}(n.Component),A=Object(y.b)((function(e){return{auth:e.auth}}),null)(C),U=a(73),T=a.n(U),_=a(133),L=a(141),G=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.submitSearch=function(t){t.preventDefault(),e.fetchArt()},e.fetchArt=function(){var t=e.state.searchTerm,a=(e.state.pageNumber,"https://www.wikiart.org/en/api/2/PaintingSearch?term=".concat(t,"&pagination"));fetch("https://cors-anywhere.herokuapp.com/"+a).then((function(e){return e.json()})).then((function(t){e.setState({artworks:t.data,pageNumber:e.state.pageNumber,searchTerm:""})}))},e.state={pageNumber:1,searchTerm:"",artworks:[],totalResults:0,user:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");if(console.log(t),t){var a={method:"GET",headers:{Authorization:"Bearer ".concat(t)}};console.log(a),fetch("http://localhost:3001/current_user",a).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?e.props.history.push("/"):(e.props.currentUser(t),e.setState({user:t}))}))}else this.props.history.push("/login")}}]),Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"Search-div"},r.a.createElement(E.a,{className:"Greeting-title",variant:"h4"},"Hello, ",this.state.user.username,"."),r.a.createElement(g.a,{m:3},r.a.createElement(E.a,{className:"Search-title",variant:"h3"},"What are you looking for?")),r.a.createElement("form",{onSubmit:function(t){return e.submitSearch(t)}},r.a.createElement(f.a,{className:"Search-bar",id:"search",onChange:this.handleChange,name:"searchTerm",type:"text",value:this.state.searchTerm,fontSize:"18px",placeholder:"artist, title, date...",autoComplete:"off"}),r.a.createElement(L.a,{title:"Search"},r.a.createElement(_.a,{color:"primary",type:"submit"},r.a.createElement(T.a,null))))),r.a.createElement(A,{artworks:this.state.artworks,pageNumber:this.state.pageNumber,fetchMore:this.fetchMore}))}}]),a}(n.Component),x={currentUser:b},I=Object(y.b)((function(e){return{auth:e.auth}}),x)(G),D=a(134),R=a(135),P=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(D.a,{position:"static",style:{background:"transparent"}},r.a.createElement(R.a,null,r.a.createElement(d.a,{href:"/search",style:{flexGrow:1}},r.a.createElement(E.a,{variant:"h6"},"Search")),r.a.createElement(d.a,{href:"/collection",style:{flexGrow:1}},r.a.createElement(E.a,{variant:"h6"},"Collection")),r.a.createElement(d.a,{href:"/account",style:{flexGrow:1}},r.a.createElement(E.a,{variant:"h6"},"Account"))))}}]),a}(n.Component),J=a(74),z=a.n(J),B=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;console.log(this.props);return r.a.createElement("div",null,r.a.createElement(E.a,{className:"Artwork-info",variant:"h4"},this.props.userArtwork.title),r.a.createElement("a",{href:"".concat(this.props.userArtwork.image),target:"_blank"},r.a.createElement("img",{src:"".concat(this.props.userArtwork.image),alt:"Artwork",style:{height:"75%",width:"75%"}})),r.a.createElement("div",{className:"Artwork-info"},r.a.createElement(E.a,{className:"Artwork-info",variant:"h5"},this.props.userArtwork.artist),r.a.createElement(E.a,{className:"Artwork-info",variant:"h6"},this.props.userArtwork.date),r.a.createElement(_.a,{color:"secondary",type:"submit"},r.a.createElement(z.a,{onClick:function(){e.props.deleteUserArtwork(e.props.userArtwork)}}))))}}]),a}(n.Component),M=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderArtworks=function(){return e.props.collection.map((function(t){return r.a.createElement(S.a,{item:!0,xs:4},r.a.createElement(N.a,{className:"Artwork-card",elevation:3},r.a.createElement(B,{userArtwork:t,key:t.id,user:e.props.auth,deleteUserArtwork:e.props.deleteUserArtwork})))}))},e}return Object(s.a)(a,[{key:"render",value:function(){return console.log(this.props.collection),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(S.a,{spacing:3,container:!0,direction:"row",justify:"space-evenly",alignItems:"flex-start"},this.renderArtworks())))}}]),a}(n.Component),W=Object(y.b)((function(e){return{auth:e.auth}}),null)(M),X=a(75),F=a.n(X),H=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleSearch=function(t){e.setState({filteredSearch:t.target.value})},e.filteredCollection=function(){var t=e.state.collection.filter((function(t){return t.title.toLowerCase().includes(e.state.filteredSearch.toLowerCase())}));return 0===t.length?[]:t},e.deleteUserArtwork=function(t){var a=e.state.collection.filter((function(e){return e.id!==t.id}));e.setState({collection:a});fetch("".concat("http://localhost:3001/artworks","/").concat(t.id),{method:"DELETE"})},e.renderCollection=function(){return r.a.createElement("div",null,r.a.createElement(f.a,{className:"Search-bar",id:"search",onChange:e.handleSearch,name:"searchTerm",type:"text",value:e.state.searchTerm,fontSize:"18px",placeholder:"Filter by Title",autoComplete:"off"}),r.a.createElement(L.a,{title:"Filter"},r.a.createElement(_.a,{color:"primary",type:"submit"},r.a.createElement(F.a,null))),r.a.createElement(W,{collection:e.filteredCollection(),deleteUserArtwork:e.deleteUserArtwork}))},e.state={collection:[],filteredSearch:"",user:{}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");if(console.log(t),t){var a={method:"GET",headers:{Authorization:"Bearer ".concat(t)}};console.log(a),fetch("http://localhost:3001/current_user",a).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?e.props.history.push("/"):e.props.currentUser(t),fetch("".concat("http://localhost:3001/users","/").concat(t.id)).then((function(e){return e.json()})).then((function(a){return e.setState({collection:a.artworks,user:t})}))}))}else this.props.history.push("/login")}}]),Object(s.a)(a,[{key:"render",value:function(){return console.log(this.state.collection),console.log(this.state.user.id),r.a.createElement(r.a.Fragment,null,this.state.user?this.renderCollection():null)}}]),a}(n.Component),V={currentUser:b},Y=Object(y.b)((function(e){return{auth:e.auth}}),V)(H),$=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleLogout=function(){localStorage.removeItem("token"),e.props.logoutUser()},e.state={user:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");if(console.log(t),t){var a={method:"GET",headers:{Authorization:"Bearer ".concat(t)}};console.log(a),fetch("http://localhost:3001/current_user",a).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?e.props.history.push("/login"):(e.props.currentUser(t),e.setState({user:t}))}))}else this.props.history.push("/")}}]),Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Particle-js"},r.a.createElement("div",{className:"Account-card"},r.a.createElement(E.a,{className:"Account-details",variant:"h4"},this.state.user.username),r.a.createElement(E.a,{className:"Account-details",variant:"h4"},this.state.user.email)),r.a.createElement(g.a,{m:3},r.a.createElement(d.a,{className:"Logout-button",type:"submit",onClick:this.handleLogout,href:"/login",variant:"contained",color:"primary"},"Logout")))}}]),a}(n.Component),q={currentUser:b},K=Object(y.b)((function(e){return{auth:e.auth}}),q)($),Q=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/signup",component:v}),r.a.createElement(h.a,{path:"/",component:j}),r.a.createElement(h.a,{path:"/search"},r.a.createElement(P,null),r.a.createElement(I,null)),r.a.createElement(h.a,{path:"/collection"},r.a.createElement(P,null),r.a.createElement(Y,null)),r.a.createElement(h.a,{path:"/account"},r.a.createElement(P,null),r.a.createElement(K,null)))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(36),ee=Object(Z.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":case"CURRENT_USER":return t.user;case"LOGOUT_USER":return null;default:return e}}}),te=a(76),ae=a(136),ne=Object(Z.c)(ee,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),re=Object(te.a)({palette:{type:"dark"},colors:{secondary:"red"}});c.a.render(r.a.createElement(ae.a,{theme:re},r.a.createElement(m.a,null,r.a.createElement(y.a,{store:ne},r.a.createElement(Q,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,t,a){e.exports=a(104)},96:function(e,t,a){},97:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.2f084530.chunk.js.map